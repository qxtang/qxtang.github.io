<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>my-book - 设计稿多端适配方案</title>

  <!-- styles -->
  <link rel="stylesheet" href="/resource/lib/github-markdown.min.css" />
  <link rel="stylesheet" href="/resource/style.css" />
  <link rel="stylesheet" href="/resource/lib/highlight.default.min.css" />
  <link rel="stylesheet" href="/resource/lib/viewerjs-1.10.5/viewer.min.css" />

  <!-- scripts -->
  <script src="/resource/lib/jquery.min.js"></script>

  <!-- PWA support -->
  <link rel="manifest" href="/manifest.json" />
  <link rel="shortcut icon" type="image/x-icon" href="/resource/favicon.ico" />
  <link rel="bookmark" type="image/x-icon" href="/resource/favicon.ico" />
  <link rel="apple-touch-icon" href="/resource/favicon.ico" />

  <!-- 编译时间：11/16/2022, 12:28:08 PM -->

  <script>
    window.root = '';

    // 提前把搜索数据库载入内存
    fetch(`${window.root}/dir_tree.json`)
            .then(function (res) {
              return res.json();
            })
            .then(function (res) {
              window.__doc_builder_dir_tree__ = res;
            });
  </script>
</head>

  <body>
    <ul class="menu expand" id="menu">
      <div class="loading">
        <span>加载中...</span>
      </div>
      <div class="search_bar" id="search_bar">
        <input type="text" placeholder="search..." />
        <img
          class="clear"
          id="clear"
          src="/resource/icons/circle-xmark.svg"
          alt=""
        />
        <div class="search_result" id="search_result"></div>
      </div>
      
            <ul class="parent expand">
              <li id="cfc6762313c8fadde407c043154409f7" class="dir" title="最佳实践">
                <span>最佳实践</span>
                <div class="triangle"></div>
              </li>
              
          <li id="ebf2402bd9434a155afe3ebfdc48703c" class="children" title="CSS">
            <a href="/ebf2402bd9434a155afe3ebfdc48703c.html">CSS</a>
          </li>
        
          <li id="90c722fcc7f93ea31011ef4abc7f384d" class="children" title="Javascript">
            <a href="/90c722fcc7f93ea31011ef4abc7f384d.html">Javascript</a>
          </li>
        
          <li id="38f7be06c8c5c4d4d37ea6cadecfc7fe" class="children" title="React">
            <a href="/38f7be06c8c5c4d4d37ea6cadecfc7fe.html">React</a>
          </li>
        
          <li id="ba10a4620326524d5d0bbd415c89547d" class="children" title="Typescript">
            <a href="/ba10a4620326524d5d0bbd415c89547d.html">Typescript</a>
          </li>
        
          <li id="51b25023a9599f0d6c9e98023276e83b" class="children" title="指引">
            <a href="/51b25023a9599f0d6c9e98023276e83b.html">指引</a>
          </li>
        
          <li id="3233a2fef6cdd8be80be016f2b9eeaa0" class="children" title="通用">
            <a href="/3233a2fef6cdd8be80be016f2b9eeaa0.html">通用</a>
          </li>
        
            </ul>
          
            <ul class="parent expand">
              <li id="079c4846f4492de09e5c456d89c26df5" class="dir" title="工作沉淀">
                <span>工作沉淀</span>
                <div class="triangle"></div>
              </li>
              
          <li id="c259441ba1b59e345b9198134fbe688a" class="children" title="ADB 通过 Wi-Fi 调试手机">
            <a href="/c259441ba1b59e345b9198134fbe688a.html">ADB 通过 Wi-Fi 调试手机</a>
          </li>
        
          <li id="18ee921cd515e914d7e5a89fd6bba176" class="children" title="GitFlow 笔记">
            <a href="/18ee921cd515e914d7e5a89fd6bba176.html">GitFlow 笔记</a>
          </li>
        
          <li id="e9a2550e8c53d313e8e31853512a444e" class="children" title="Nginx 笔记">
            <a href="/e9a2550e8c53d313e8e31853512a444e.html">Nginx 笔记</a>
          </li>
        
          <li id="15c0a89ff7639100c849b3d0090fd083" class="children" title="动态校验企微应用可信域名">
            <a href="/15c0a89ff7639100c849b3d0090fd083.html">动态校验企微应用可信域名</a>
          </li>
        
          <li id="b113ce2d11fb3ad7fc3a16d27da51e74" class="children" title="工作中遇到问题汇总">
            <a href="/b113ce2d11fb3ad7fc3a16d27da51e74.html">工作中遇到问题汇总</a>
          </li>
        
          <li id="cdc10d3ed389a940115d2c0e55b9f2c9" class="children" title="真机调试微信 h5 页面">
            <a href="/cdc10d3ed389a940115d2c0e55b9f2c9.html">真机调试微信 h5 页面</a>
          </li>
        
          <li id="2c345830cc8d387301b8b41dde257133" class="children" title="设计稿多端适配方案">
            <a href="/2c345830cc8d387301b8b41dde257133.html">设计稿多端适配方案</a>
          </li>
        
            </ul>
          
            <ul class="parent expand">
              <li id="07405a1e638d890ec4968814c210740b" class="dir" title="前端技术">
                <span>前端技术</span>
                <div class="triangle"></div>
              </li>
              
          <li id="65251720ce93a86e0baf484ea8ff1fd2" class="children" title="AST抽象语法树">
            <a href="/65251720ce93a86e0baf484ea8ff1fd2.html">AST抽象语法树</a>
          </li>
        
          <li id="4f33420293c9962d59b3bea05fc9da86" class="children" title="Babel">
            <a href="/4f33420293c9962d59b3bea05fc9da86.html">Babel</a>
          </li>
        
          <li id="da1cb124c51c98d0dd90ce9db78aa2dc" class="children" title="React源码学习">
            <a href="/da1cb124c51c98d0dd90ce9db78aa2dc.html">React源码学习</a>
          </li>
        
          <li id="d3c9e089dd008e2d59c32305f690bbb7" class="children" title="微前端">
            <a href="/d3c9e089dd008e2d59c32305f690bbb7.html">微前端</a>
          </li>
        
          <li id="2227cf216416fc887bc6ecb4f95596a7" class="children" title="性能优化">
            <a href="/2227cf216416fc887bc6ecb4f95596a7.html">性能优化</a>
          </li>
        
            </ul>
          
          <li id="6e812ab51a7eb39b3c4495548c8b8868" class="children" title="css世界、css新世界读书笔记">
            <a href="/6e812ab51a7eb39b3c4495548c8b8868.html">css世界、css新世界读书笔记</a>
          </li>
        
      <li id="index.md" class="children about">
        <a href="/">关于</a>
      </li>
    </ul>
    <div class="drager" id="drager">
      <div class="switcher btn" id="switcher" title="展开或收起"></div>
      <div class="expand-all btn" id="expand-all" title="展开所有"></div>
      <div class="collapse-all btn" id="collapse-all" title="收起所有"></div>
    </div>
    <div class="mobile_menu" id="mobile_menu">
      <img src="/resource/icons/bars.svg" alt="" />
    </div>
    <div class="content markdown-body">
      <h1 id="%E8%AE%BE%E8%AE%A1%E7%A8%BF%E5%A4%9A%E7%AB%AF%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88" tabindex="-1"><a class="header-anchor" href="#%E8%AE%BE%E8%AE%A1%E7%A8%BF%E5%A4%9A%E7%AB%AF%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88">设计稿多端适配方案</a></h1>
<h2 id="%E5%8F%82%E8%80%83" tabindex="-1"><a class="header-anchor" href="#%E5%8F%82%E8%80%83">参考</a></h2>
<ul>
<li><a href="https://juejin.cn/post/7018730346216685582" target="_blank">https://juejin.cn/post/7018730346216685582</a></li>
</ul>
<h2 id="%E9%97%AE%E9%A2%98" tabindex="-1"><a class="header-anchor" href="#%E9%97%AE%E9%A2%98">问题</a></h2>
<p>如何让不同尺寸的屏幕能以正常比例呈现设计稿</p>
<h3 id="%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9-font-size-%2B-rem-%E6%96%B9%E6%A1%88" tabindex="-1"><a class="header-anchor" href="#%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9-font-size-%2B-rem-%E6%96%B9%E6%A1%88">动态修改 font-size + rem 方案</a></h3>
<ul>
<li>
<p>动态修改 html 标签 font-size，样式单位统一用 rem，数值为设计稿尺寸除以 base</p>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> fn = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
  <span class="hljs-keyword">var</span> designWidth = <span class="hljs-number">1920</span>; <span class="hljs-comment">// 设计稿尺寸</span>
  <span class="hljs-keyword">var</span> base = <span class="hljs-number">16</span>; <span class="hljs-comment">// 1rem 的占比，不要小于 12</span>
  <span class="hljs-keyword">var</span> html = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&#x27;html&#x27;</span>)[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> clientWidth = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">clientWidth</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span>;
  html.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = (clientWidth / designWidth) * base + <span class="hljs-string">&#x27;px&#x27;</span>;
};

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
  <span class="hljs-title function_">fn</span>();
});

<span class="hljs-variable language_">window</span>.<span class="hljs-property">onresize</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
  <span class="hljs-title function_">fn</span>();
};
</code></pre>
</li>
</ul>
<h4 id="%E5%BC%8A%E7%AB%AF" tabindex="-1"><a class="header-anchor" href="#%E5%BC%8A%E7%AB%AF">弊端</a></h4>
<ul>
<li>和根元素 font-size 值强耦合，系统字体放大或缩小时，会导致布局错乱</li>
<li>html 文件头部需插入一段 js 代码</li>
<li>相较之下，vw 单位兼容性比 rem 稍差，ios8、安卓 4.4 及以上才完全支持。这也是为什么之前 rem 布局一直更流行的原因。目前 ios8、安卓 4.4 以下的用户已经非常少了，caniuse 上面显示，在中国这部分用户只有 1.2%，比例已经非常低了</li>
</ul>
<h3 id="%E8%AE%BE%E8%AE%A1%E7%A8%BF-px-%E8%BD%AC-vw-%E6%96%B9%E6%A1%88%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89" tabindex="-1"><a class="header-anchor" href="#%E8%AE%BE%E8%AE%A1%E7%A8%BF-px-%E8%BD%AC-vw-%E6%96%B9%E6%A1%88%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89">设计稿 px 转 vw 方案（推荐）</a></h3>
<ul>
<li>1vw 表示屏幕宽度的 1%</li>
<li>把所有需要适配屏幕大小等比缩放的元素都使用 vw 做为单位。不需要缩放的元素使用 px 做单位</li>
<li>举个例子。设计师交付的设计稿宽度是 750px，设计稿上一个标题的 fontSize 标注尺寸是 32px。<code>(32/750)*100% = 4.27%</code> ，换句话说这个标题的字号占屏幕宽度的占比是 4.27%，不管任何屏幕都是如此。4.27% 即 4.27vw。</li>
<li>可以使用 post-css 专门的插件做转换，或使用预处理样式语言中的函数</li>
</ul>
<pre><code class="language-less"><span class="hljs-variable">@baseScreenWidth:</span> <span class="hljs-number">320</span>;
<span class="hljs-selector-class">.px2vw</span>(<span class="hljs-variable">@name</span>, <span class="hljs-variable">@px</span>) {
  @{name}: (<span class="hljs-variable">@px</span> / <span class="hljs-variable">@baseScreenWidth</span>) * <span class="hljs-number">100vw</span>;
}
</code></pre>
<pre><code class="language-scss"><span class="hljs-keyword">@function</span> px2vw(<span class="hljs-variable">$px</span>) {
  <span class="hljs-keyword">@return</span> <span class="hljs-variable">$px</span> * <span class="hljs-number">100vw</span> / <span class="hljs-number">750</span>;
}

<span class="hljs-comment">// 以iphone7尺寸@2x 750像素宽的视觉稿为例</span>
<span class="hljs-keyword">@function</span> vw(<span class="hljs-variable">$px</span>) {
  <span class="hljs-keyword">@return</span> (<span class="hljs-variable">$px</span> / <span class="hljs-number">750</span>) * <span class="hljs-number">100vw</span>;
}

<span class="hljs-comment">// 假设一个div元素在视觉稿中，宽度为120px，字体大小为12px</span>
<span class="hljs-selector-tag">div</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">vw</span>(<span class="hljs-number">120</span>);
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">vw</span>(<span class="hljs-number">12</span>);
}
</code></pre>
<h2 id="dpr-%E6%98%AF%E4%BB%80%E4%B9%88" tabindex="-1"><a class="header-anchor" href="#dpr-%E6%98%AF%E4%BB%80%E4%B9%88">dpr 是什么</a></h2>
<ul>
<li>设备像素比，通过 window.devicePixelRatio 获取</li>
<li>是设备上物理像素和设备独立像素（dips）的比例，window.devicePixelRatio = 物理像素 / dips</li>
<li>简单的讲其实就是 dpr 决定了 css 1px 等于多少屏幕物理像素</li>
</ul>
<h3 id="%E7%89%A9%E7%90%86%E5%83%8F%E7%B4%A0" tabindex="-1"><a class="header-anchor" href="#%E7%89%A9%E7%90%86%E5%83%8F%E7%B4%A0">物理像素</a></h3>
<ul>
<li>显示器上最小的物理显示单元，在操作系统的调度下，每一个设备像素都有自己的颜色值和亮度值</li>
</ul>
<h3 id="%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E5%83%8F%E7%B4%A0%EF%BC%88dips%EF%BC%89" tabindex="-1"><a class="header-anchor" href="#%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E5%83%8F%E7%B4%A0%EF%BC%88dips%EF%BC%89">设备独立像素（dips）</a></h3>
<ul>
<li>也叫密度无关像素，可以认为是计算机坐标系统中得一个点，这个点代表一个可以由程序使用的虚拟像素（比如: css 像素），然后由相关系统转换为物理像素</li>
</ul>
<h2 id="viewport" tabindex="-1"><a class="header-anchor" href="#viewport">viewport</a></h2>
<ul>
<li>用于定义视口的各种行为：视口宽度、初始缩放、最小最大缩放比例、是否允许用户手动缩放</li>
</ul>
<h2 id="%E8%A7%A3%E5%86%B3%E8%AE%BE%E5%A4%87%E5%B1%8F%E5%B9%95%E5%AE%BD%E9%AB%98%E6%AF%94%E5%B7%AE%E5%BC%82%E9%97%AE%E9%A2%98" tabindex="-1"><a class="header-anchor" href="#%E8%A7%A3%E5%86%B3%E8%AE%BE%E5%A4%87%E5%B1%8F%E5%B9%95%E5%AE%BD%E9%AB%98%E6%AF%94%E5%B7%AE%E5%BC%82%E9%97%AE%E9%A2%98">解决设备屏幕宽高比差异问题</a></h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio" target="_blank">https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/device-aspect-ratio" target="_blank">https://developer.mozilla.org/en-US/docs/Web/CSS/@media/device-aspect-ratio</a></li>
</ul>

      
        <div class="btt withToc" id="btt"></div>
      
    </div>
    
    <div class="table-of-contents"><ul><li title="设计稿多端适配方案"><a href="#%E8%AE%BE%E8%AE%A1%E7%A8%BF%E5%A4%9A%E7%AB%AF%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88" data-anchor="#%E8%AE%BE%E8%AE%A1%E7%A8%BF%E5%A4%9A%E7%AB%AF%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88">设计稿多端适配方案</a><ul><li title="参考"><a href="#%E5%8F%82%E8%80%83" data-anchor="#%E5%8F%82%E8%80%83">参考</a></li><li title="问题"><a href="#%E9%97%AE%E9%A2%98" data-anchor="#%E9%97%AE%E9%A2%98">问题</a><ul><li title="动态修改 font-size + rem 方案"><a href="#%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9-font-size-%2B-rem-%E6%96%B9%E6%A1%88" data-anchor="#%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9-font-size-%2B-rem-%E6%96%B9%E6%A1%88">动态修改 font-size + rem 方案</a><ul><li title="弊端"><a href="#%E5%BC%8A%E7%AB%AF" data-anchor="#%E5%BC%8A%E7%AB%AF">弊端</a></li></ul></li><li title="设计稿 px 转 vw 方案（推荐）"><a href="#%E8%AE%BE%E8%AE%A1%E7%A8%BF-px-%E8%BD%AC-vw-%E6%96%B9%E6%A1%88%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89" data-anchor="#%E8%AE%BE%E8%AE%A1%E7%A8%BF-px-%E8%BD%AC-vw-%E6%96%B9%E6%A1%88%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89">设计稿 px 转 vw 方案（推荐）</a></li></ul></li><li title="dpr 是什么"><a href="#dpr-%E6%98%AF%E4%BB%80%E4%B9%88" data-anchor="#dpr-%E6%98%AF%E4%BB%80%E4%B9%88">dpr 是什么</a><ul><li title="物理像素"><a href="#%E7%89%A9%E7%90%86%E5%83%8F%E7%B4%A0" data-anchor="#%E7%89%A9%E7%90%86%E5%83%8F%E7%B4%A0">物理像素</a></li><li title="设备独立像素（dips）"><a href="#%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E5%83%8F%E7%B4%A0%EF%BC%88dips%EF%BC%89" data-anchor="#%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E5%83%8F%E7%B4%A0%EF%BC%88dips%EF%BC%89">设备独立像素（dips）</a></li></ul></li><li title="viewport"><a href="#viewport" data-anchor="#viewport">viewport</a></li><li title="解决设备屏幕宽高比差异问题"><a href="#%E8%A7%A3%E5%86%B3%E8%AE%BE%E5%A4%87%E5%B1%8F%E5%B9%95%E5%AE%BD%E9%AB%98%E6%AF%94%E5%B7%AE%E5%BC%82%E9%97%AE%E9%A2%98" data-anchor="#%E8%A7%A3%E5%86%B3%E8%AE%BE%E5%A4%87%E5%B1%8F%E5%B9%95%E5%AE%BD%E9%AB%98%E6%AF%94%E5%B7%AE%E5%BC%82%E9%97%AE%E9%A2%98">解决设备屏幕宽高比差异问题</a></li></ul></li></ul></div>
    

    <!-- bottom scripts -->
    <script src="/resource/lib/mark.js-8.11.1/jquery.mark.min.js"></script>
    <script src="/resource/lib/viewerjs-1.10.5/viewer.min.js"></script>
    <script src="/resource/lib/jquery-viewer-1.0.1/jquery-viewer.min.js"></script>
    <script src="/resource/script.js"></script>
  </body>
</html>
