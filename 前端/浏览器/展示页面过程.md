# 展示页面过程

## 构造请求

输入 URL 后解析出协议、主机、端口、路径等信息，构造一个 HTTP 请求

## 查询缓存

强缓存、协商缓存

## DNS 解析

- DNS 解析其实是一个递归的过程

为了更快拿到 IP，DNS 普遍使用了缓存：

- 浏览器缓存：浏览器按照一定的频率缓存 DNS 记录
- 操作系统缓存：如果浏览器缓存中找不到 DNS 记录，就会去操作系统中找
- 路由缓存：路由器也有 DNS 缓存
- 查询 ISP 的 DNS 服务器
- 根服务器：ISP 的 DNS 服务器找不到之后，向根服务器发出请求，进行递归查询
- CDN：DNS 服务器会返回一个跟用户最接近的点的 IP 地址给用户，CDN 节点的服务器负责响应用户的请求，提供所需的内容
- dns-prefetch：一种 DNS 预解析技术。当浏览网页时，浏览器会在加载网页时对网页中的域名进行解析缓存，这样在单击当前网页中的连接时就无需进行 DNS 的解析，减少用户等待时间，提高用户体验

## 获取 ip 和端口

获得请求 url 对应的 ip 地址，根据解析到的 IP 地址和端口号发起请求

## 建立 TCP 连接

tcp 协议通过三次握手与服务器建立连接

## 服务器处理请求

## 服务器响应

（nginx、apache 等）处理请求并返回 HTTP 报文，浏览器收到开始渲染

## 浏览器渲染流程

详见渲染原理

## 断开 TCP 连接：TCP 四次挥手

## 参考

- https://juejin.cn/post/6844903779700047885
- https://juejin.cn/post/6844903815758479374
